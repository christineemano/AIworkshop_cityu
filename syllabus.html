<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Syllabus</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background-color: #ffffff;
            color: #000000;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border-bottom: 3px solid #2e7d32;
        }

        .course-title {
            font-size: 2.5em;
            color: #2e7d32;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .course-subtitle {
            font-size: 1.2em;
            color: #388e3c;
            margin-bottom: 5px;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .btn {
            background-color: #2e7d32;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #388e3c;
        }

        .btn.secondary {
            background-color: #388e3c;
        }

        .save-status {
            position: fixed;
            top: 70px;
            right: 20px;
            padding: 5px 10px;
            background-color: #e8f5e8;
            border: 1px solid #2e7d32;
            border-radius: 3px;
            font-size: 12px;
            display: none;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e8f5e8;
            border-radius: 8px;
        }

        .section h2 {
            color: #2e7d32;
            border-bottom: 2px solid #e8f5e8;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .section h3 {
            color: #388e3c;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .editable {
            padding: 8px;
            border-radius: 4px;
            transition: all 0.3s;
            min-height: 20px;
            display: block;
        }

        .editable:focus {
            background-color: #e8f5e8;
            border: 2px solid #2e7d32;
            outline: none;
        }

        .editing-mode .editable {
            border: 1px dashed #2e7d32;
            background-color: #f9fff9;
        }

        .editing-mode .editable:hover {
            background-color: #e8f5e8;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            border: 1px solid #e8f5e8;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #2e7d32;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f9fff9;
        }

        .assignment-list {
            list-style: none;
            padding: 0;
        }

        .assignment-item {
            background-color: #f9fff9;
            border-left: 4px solid #2e7d32;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 0 5px 5px 0;
        }

        .assignment-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .edit-indicator {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: #2e7d32;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .editing-mode .editable {
            position: relative;
        }

        .editing-mode .editable:hover .edit-indicator {
            opacity: 1;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .course-title {
                font-size: 2em;
            }
            
            .controls {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin-bottom: 20px;
            }
            
            .save-status {
                position: relative;
                top: auto;
                right: auto;
                text-align: center;
                margin-bottom: 10px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .file-input {
            display: none;
        }

        .contact-info {
            background-color: #f9fff9;
            border: 1px solid #e8f5e8;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .policies {
            background-color: #f9fff9;
            border-left: 4px solid #388e3c;
            padding: 15px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="controls">
        <button class="btn" id="editBtn" onclick="toggleEditMode()">Edit Mode</button>
        <button class="btn secondary" onclick="downloadPDF()">Download PDF</button>
        <button class="btn secondary" onclick="exportData()">Export Data</button>
        <button class="btn secondary" onclick="document.getElementById('importFile').click()">Import Data</button>
        <input type="file" id="importFile" class="file-input" accept=".json" onchange="importData(event)">
    </div>

    <div class="save-status" id="saveStatus">Saved</div>

    <div class="header">
        <h1 class="course-title editable" data-field="courseTitle" contenteditable="true">ELT 102: English Language Teaching</h1>
        <div class="course-subtitle editable" data-field="courseSubtitle" contenteditable="true">Foundations of Language Learning and Teaching</div>
        <div class="course-subtitle editable" data-field="semester" contenteditable="true">Fall 2024 | Section 001</div>
        <div class="course-subtitle editable" data-field="institution" contenteditable="true">University of Language Studies</div>
    </div>

    <div class="section">
        <h2>Course Information</h2>
        <div class="info-grid">
            <div class="info-item">
                <span class="info-label">Course Code:</span>
                <span class="editable" data-field="courseCode" contenteditable="true">ELT 102</span>
            </div>
            <div class="info-item">
                <span class="info-label">Credits:</span>
                <span class="editable" data-field="credits" contenteditable="true">3 Credit Hours</span>
            </div>
            <div class="info-item">
                <span class="info-label">Meeting Time:</span>
                <span class="editable" data-field="meetingTime" contenteditable="true">MWF 10:00-10:50 AM</span>
            </div>
            <div class="info-item">
                <span class="info-label">Location:</span>
                <span class="editable" data-field="location" contenteditable="true">Education Building, Room 205</span>
            </div>
            <div class="info-item">
                <span class="info-label">Prerequisites:</span>
                <span class="editable" data-field="prerequisites" contenteditable="true">ENG 101 or equivalent</span>
            </div>
            <div class="info-item">
                <span class="info-label">Modality:</span>
                <span class="editable" data-field="modality" contenteditable="true">Face-to-Face</span>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>Instructor Information</h2>
        <div class="contact-info">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Instructor:</span>
                    <span class="editable" data-field="instructorName" contenteditable="true">Dr. Sarah Johnson</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Email:</span>
                    <span class="editable" data-field="instructorEmail" contenteditable="true">s.johnson@university.edu</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Office:</span>
                    <span class="editable" data-field="office" contenteditable="true">Education Building, Room 312</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Office Hours:</span>
                    <span class="editable" data-field="officeHours" contenteditable="true">Tuesday & Thursday 2:00-4:00 PM, or by appointment</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Phone:</span>
                    <span class="editable" data-field="phone" contenteditable="true">(555) 123-4567</span>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>Course Description</h2>
        <div class="editable" data-field="courseDescription" contenteditable="true">
            This course provides an introduction to the fundamental principles and practices of English Language Teaching (ELT). Students will explore theoretical foundations of second language acquisition, examine various teaching methodologies, and develop practical skills for effective language instruction. The course emphasizes the integration of theory and practice through hands-on activities, lesson planning, and reflective teaching practices.
        </div>
    </div>

    <div class="section">
        <h2>Learning Objectives</h2>
        <div class="editable" data-field="learningObjectives" contenteditable="true">
            Upon successful completion of this course, students will be able to:
            <br><br>
            • Demonstrate understanding of key theories and principles of second language acquisition<br>
            • Analyze and evaluate various English language teaching methodologies and approaches<br>
            • Design age-appropriate and level-appropriate lesson plans for diverse learner populations<br>
            • Apply effective classroom management techniques in language learning environments<br>
            • Assess student language proficiency using appropriate evaluation tools and techniques<br>
            • Integrate technology effectively into language teaching practices<br>
            • Reflect critically on teaching practices and implement continuous improvement strategies
        </div>
    </div>

    <div class="section">
        <h2>Required Materials</h2>
        <div class="editable" data-field="requiredMaterials" contenteditable="true">
            <strong>Textbooks:</strong><br>
            • Brown, H. D. (2014). Principles of Language Learning and Teaching (7th ed.). Pearson.<br>
            • Richards, J. C., & Bohlke, D. (2017). Creating Effective Language Lessons. Cambridge University Press.<br><br>
            
            <strong>Additional Materials:</strong><br>
            • Course packet available at university bookstore<br>
            • Access to online learning management system<br>
            • Notebook for reflective journaling<br>
            • Access to video recording device (smartphone acceptable) for teaching demonstrations
        </div>
    </div>

    <div class="section">
        <h2>Course Schedule</h2>
        <table class="editable" data-field="schedule" contenteditable="true">
            <thead>
                <tr>
                    <th>Week</th>
                    <th>Date</th>
                    <th>Topic</th>
                    <th>Readings</th>
                    <th>Assignments Due</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Aug 28-30</td>
                    <td>Introduction to ELT / Course Overview</td>
                    <td>Brown Ch. 1-2</td>
                    <td>Learning Survey</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Sep 4-6</td>
                    <td>First Language vs. Second Language Acquisition</td>
                    <td>Brown Ch. 3-4</td>
                    <td>Reflection Journal #1</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Sep 11-13</td>
                    <td>Learning Theories and SLA</td>
                    <td>Brown Ch. 5-6</td>
                    <td>Theory Analysis Paper</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Sep 18-20</td>
                    <td>Age and Language Learning</td>
                    <td>Brown Ch. 7</td>
                    <td>Observation Report #1</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Sep 25-27</td>
                    <td>Teaching Methodologies Overview</td>
                    <td>Richards & Bohlke Ch. 1-2</td>
                    <td>Methodology Comparison Chart</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <h2>Assignments and Assessments</h2>
        <ul class="assignment-list">
            <li class="assignment-item">
                <div class="assignment-title editable" data-field="assignment1Title" contenteditable="true">Reflective Teaching Journal (20%)</div>
                <div class="editable" data-field="assignment1Description" contenteditable="true">Weekly reflections on readings, class discussions, and teaching observations. Minimum 500 words per entry.</div>
            </li>
            <li class="assignment-item">
                <div class="assignment-title editable" data-field="assignment2Title" contenteditable="true">Classroom Observation Reports (15%)</div>
                <div class="editable" data-field="assignment2Description" contenteditable="true">Three structured observations of ESL/EFL classrooms with analytical reports on teaching methods observed.</div>
            </li>
            <li class="assignment-item">
                <div class="assignment-title editable" data-field="assignment3Title" contenteditable="true">Lesson Plan Portfolio (25%)</div>
                <div class="editable" data-field="assignment3Description" contenteditable="true">Development of five complete lesson plans for different skill areas and proficiency levels.</div>
            </li>
            <li class="assignment-item">
                <div class="assignment-title editable" data-field="assignment4Title" contenteditable="true">Teaching Demonstration (20%)</div>
                <div class="editable" data-field="assignment4Description" contenteditable="true">15-minute recorded teaching demonstration with self-reflection and peer feedback.</div>
            </li>
            <li class="assignment-item">
                <div class="assignment-title editable" data-field="assignment5Title" contenteditable="true">Final Research Project (20%)</div>
                <div class="editable" data-field="assignment5Description" contenteditable="true">Research paper on a specific aspect of ELT methodology or SLA theory (3000-4000 words).</div>
            </li>
        </ul>
    </div>

    <div class="section">
        <h2>Grading Policy</h2>
        <div class="editable" data-field="gradingPolicy" contenteditable="true">
            <strong>Grade Distribution:</strong><br>
            A: 93-100% | A-: 90-92% | B+: 87-89% | B: 83-86% | B-: 80-82%<br>
            C+: 77-79% | C: 73-76% | C-: 70-72% | D+: 67-69% | D: 60-66% | F: Below 60%<br><br>
            
            <strong>Late Work Policy:</strong><br>
            Late assignments will be penalized 5% per day unless prior arrangements are made. Extensions may be granted for documented emergencies or health issues.
        </div>
    </div>

    <div class="section">
        <h2>Course Policies</h2>
        
        <div class="policies">
            <h3>Attendance Policy</h3>
            <div class="editable" data-field="attendancePolicy" contenteditable="true">
                Regular attendance is essential for success in this course. Students are expected to attend all classes. More than two unexcused absences may result in a reduction of the final grade. Please notify the instructor in advance of any anticipated absence.
            </div>
        </div>

        <div class="policies">
            <h3>Academic Integrity</h3>
            <div class="editable" data-field="academicIntegrity" contenteditable="true">
                All work submitted must be your own. Plagiarism, cheating, or any form of academic dishonesty will result in failure of the assignment and may result in failure of the course. When using sources, proper citation is required following APA format.
            </div>
        </div>

        <div class="policies">
            <h3>Disability Services</h3>
            <div class="editable" data-field="disabilityServices" contenteditable="true">
                Students with documented disabilities who may need accommodations should make an appointment with the instructor as soon as possible. All discussions will remain confidential. Students with disabilities should also contact Disability Services to verify their eligibility for reasonable accommodations.
            </div>
        </div>

        <div class="policies">
            <h3>Communication Policy</h3>
            <div class="editable" data-field="communicationPolicy" contenteditable="true">
                The best way to contact me is via email. I will respond to emails within 24-48 hours during weekdays. For urgent matters, please indicate "URGENT" in the subject line. Office hours are available for more detailed discussions about course content or assignments.
            </div>
        </div>
    </div>

    <script>
        let isEditMode = false;
        let syllabusData = {};

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadSyllabusData();
            setupAutoSave();
        });

        // Toggle edit mode
        function toggleEditMode() {
            isEditMode = !isEditMode;
            const body = document.body;
            const editBtn = document.getElementById('editBtn');
            
            if (isEditMode) {
                body.classList.add('editing-mode');
                editBtn.textContent = 'View Mode';
                showSaveStatus('Editing mode enabled');
            } else {
                body.classList.remove('editing-mode');
                editBtn.textContent = 'Edit Mode';
                saveSyllabusData();
                showSaveStatus('Changes saved');
            }
        }

        // Auto-save functionality
        function setupAutoSave() {
            const editableElements = document.querySelectorAll('.editable');
            editableElements.forEach(element => {
                element.addEventListener('input', function() {
                    clearTimeout(this.saveTimeout);
                    this.saveTimeout = setTimeout(() => {
                        saveSyllabusData();
                        showSaveStatus('Auto-saved');
                    }, 1000);
                });
            });
        }

        // Save syllabus data to localStorage
        function saveSyllabusData() {
            const editableElements = document.querySelectorAll('.editable[data-field]');
            editableElements.forEach(element => {
                const field = element.getAttribute('data-field');
                syllabusData[field] = element.innerHTML;
            });
            localStorage.setItem('syllabusData', JSON.stringify(syllabusData));
        }

        // Load syllabus data from localStorage
        function loadSyllabusData() {
            const savedData = localStorage.getItem('syllabusData');
            if (savedData) {
                syllabusData = JSON.parse(savedData);
                const editableElements = document.querySelectorAll('.editable[data-field]');
                editableElements.forEach(element => {
                    const field = element.getAttribute('data-field');
                    if (syllabusData[field]) {
                        element.innerHTML = syllabusData[field];
                    }
                });
            }
        }

        // Show save status
        function showSaveStatus(message) {
            const status = document.getElementById('saveStatus');
            status.textContent = message;
            status.style.display = 'block';
            setTimeout(() => {
                status.style.display = 'none';
            }, 2000);
        }

        // Export syllabus data as JSON
        function exportData() {
            saveSyllabusData();
            const dataStr = JSON.stringify(syllabusData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'syllabus_data.json';
            link.click();
            URL.revokeObjectURL(url);
            showSaveStatus('Data exported successfully');
        }

        // Import syllabus data from JSON
        function importData(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/json') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        syllabusData = importedData;
                        localStorage.setItem('syllabusData', JSON.stringify(syllabusData));
                        loadSyllabusData();
                        showSaveStatus('Data imported successfully');
                    } catch (error) {
                        alert('Error importing data. Please check the file format.');
                    }
                };
                reader.readAsText(file);
            } else {
                alert('Please select a valid JSON file.');
            }
            event.target.value = '';
        }

        // Generate and download PDF
        function downloadPDF() {
            // Ensure data is current
            saveSyllabusData();
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            let yPosition = 20;
            const leftMargin = 20;
            const rightMargin = 190;
            const lineHeight = 7;
            
            // Helper function to add text with word wrapping
            function addWrappedText(text, x, y, maxWidth, fontSize = 12) {
                doc.setFontSize(fontSize);
                const lines = doc.splitTextToSize(text, maxWidth);
                for (let i = 0; i < lines.length; i++) {
                    if (y > 270) { // Check if we need a new page
                        doc.addPage();
                        y = 20;
                    }
                    doc.text(lines[i], x, y);
                    y += lineHeight;
                }
                return y;
            }
            
            // Helper function to get clean text from HTML
            function getCleanText(html) {
                const temp = document.createElement('div');
                temp.innerHTML = html;
                return temp.textContent || temp.innerText || '';
            }
            
            try {
                // Title
                doc.setFontSize(18);
                doc.setFont(undefined, 'bold');
                const courseTitle = getCleanText(syllabusData.courseTitle || 'Course Title');
                doc.text(courseTitle, leftMargin, yPosition);
                yPosition += 10;
                
                // Subtitle
                doc.setFontSize(14);
                doc.setFont(undefined, 'normal');
                const courseSubtitle = getCleanText(syllabusData.courseSubtitle || 'Course Subtitle');
                doc.text(courseSubtitle, leftMargin, yPosition);
                yPosition += 8;
                
                const semester = getCleanText(syllabusData.semester || 'Semester');
                doc.text(semester, leftMargin, yPosition);
                yPosition += 8;
                
                const institution = getCleanText(syllabusData.institution || 'Institution');
                doc.text(institution, leftMargin, yPosition);
                yPosition += 15;
                
                // Course Information
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Course Information', leftMargin, yPosition);
                yPosition += 10;
                
                doc.setFontSize(12);
                doc.setFont(undefined, 'normal');
                
                const courseInfo = [
                    `Course Code: ${getCleanText(syllabusData.courseCode || 'N/A')}`,
                    `Credits: ${getCleanText(syllabusData.credits || 'N/A')}`,
                    `Meeting Time: ${getCleanText(syllabusData.meetingTime || 'N/A')}`,
                    `Location: ${getCleanText(syllabusData.location || 'N/A')}`,
                    `Prerequisites: ${getCleanText(syllabusData.prerequisites || 'N/A')}`
                ];
                
                courseInfo.forEach(info => {
                    doc.text(info, leftMargin, yPosition);
                    yPosition += lineHeight;
                });
                yPosition += 8;
                
                // Instructor Information
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Instructor Information', leftMargin, yPosition);
                yPosition += 10;
                
                doc.setFontSize(12);
                doc.setFont(undefined, 'normal');
                
                const instructorInfo = [
                    `Instructor: ${getCleanText(syllabusData.instructorName || 'N/A')}`,
                    `Email: ${getCleanText(syllabusData.instructorEmail || 'N/A')}`,
                    `Office: ${getCleanText(syllabusData.office || 'N/A')}`,
                    `Office Hours: ${getCleanText(syllabusData.officeHours || 'N/A')}`,
                    `Phone: ${getCleanText(syllabusData.phone || 'N/A')}`
                ];
                
                instructorInfo.forEach(info => {
                    doc.text(info, leftMargin, yPosition);
                    yPosition += lineHeight;
                });
                yPosition += 8;
                
                // Course Description
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Course Description', leftMargin, yPosition);
                yPosition += 10;
                
                const description = getCleanText(syllabusData.courseDescription || 'Course description not available.');
                yPosition = addWrappedText(description, leftMargin, yPosition, rightMargin - leftMargin, 12);
                yPosition += 8;
                
                // Learning Objectives
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Learning Objectives', leftMargin, yPosition);
                yPosition += 10;
                
                const objectives = getCleanText(syllabusData.learningObjectives || 'Learning objectives not available.');
                yPosition = addWrappedText(objectives, leftMargin, yPosition, rightMargin - leftMargin, 12);
                yPosition += 8;
                
                // Required Materials
                if (yPosition > 200) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Required Materials', leftMargin, yPosition);
                yPosition += 10;
                
                const materials = getCleanText(syllabusData.requiredMaterials || 'Required materials not available.');
                yPosition = addWrappedText(materials, leftMargin, yPosition, rightMargin - leftMargin, 12);
                yPosition += 8;
                
                // Assignments
                if (yPosition > 180) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                doc.setFontSize(16);
                doc.setFont(undefined, 'bold');
                doc.text('Assignments and Assessments', leftMargin, yPosition);
                yPosition += 10;
                
                const assignments = [
                    `${getCleanText(syllabusData.assignment1Title ||
